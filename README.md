# jira-codeception-extension

This package provides an extension for Codeception to create issues in Jira automatically when a test fails.

### How it works?

When you run a test and it fails the extension will connect with your Jira instance through the Jira API and create an issue containing the data generated by Codeception at the moment of the failure. The number of issues created will vary depending on the number of failed tests, if two tests failed then two separated issues will be created.

The issue will contain the following data:

- Test Name
- Failure Message
- Failed Step
- File Name
- Stack Trace

### Configuration Example

This extension creates a Jira issue after a test failure. To use this extension a valid Jira configuration is required.

- host: A Jira instance.
- user: A valid user that has permission to create issues in the specified project.
- token: A valid token for the specified user. The API will not accept the user password so a token is required. You can create a token in the user configuration panel, for more information follow the Jira official documentation [here](https://confluence.atlassian.com/cloud/api-tokens-938839638.html).
- projectKey: A valid Jira project key (e.g. TA, ZTE, ETC).
- issueType: Usually the issue is created as a Bug but you can change it for Task or another valid issue type available in your Jira instance.
- debugMode: In case you are creating tests or debugging tests you may not want to create issues (and I don't recommend it) so setting this config to true the extension will not create issues in production set it back to false.

Configuration 'codeception.yml' example:

    extensions:
      enabled:
        - Codeception\Extension\JiraExtension
      config:
        Codeception\Extension\JiraExtension:
          host: https://yourdomain.atlassian.net
          user: email@mail.com
          token: Tg7womaGGFpn9EC16qD3L7T6
          projectKey: JE
          issueType: Bug
          label:
            - autotest_bug
          debugMode: false
